{% extends 'base.html.twig' %}

{% block title %}Hello LoginController!{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="/scss/login.css">
{% endblock %}
{% block body %}
    <div class="container" id="container">
        <div class="form-container sign-up">
            <form method="POST" action="{{ path('app_register') }}">
                <h1>¡Crea tu cuenta!</h1>
                {% if errors is defined and errors is not empty %}
                    {% for error in errors %}
                        <div class="alert alertError alert-danger" role="alert"
                             style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                            {{ error }}
                        </div>
                    {% endfor %}
                {% endif %}
                <input type="text" placeholder="Nick" name="nick" id="nick" required>
                <input type="email" placeholder="Email" name="email" id="email" required>
                <input type="password" placeholder="Password" name="firstPassword" id="firstPassword" required>
                <input type="password" placeholder="Repeat the password" name="secondPassword" id="secondPassword"
                       required>
                <input type="hidden" name="_target_path" value="/">
                <input type="hidden" name="_csrf_token"
                       value="{{ csrf_token('authenticate') }}"
                >
                <button type="submit">Registrarse</button>
            </form>
        </div>
        <div class="form-container sign-in">
            {% if app.user %}
                <div>
                    You are logged in as {{ app.user.userIdentifier }}, <a
                            href="{{ path('app_logout') }}">Logout</a>
                </div>
            {% endif %}
            <form method="POST" action="{{ path('app_login') }}">
                <h1>Log in</h1>
                {% if errorLogin is defined and errorLogin %}
                    <div class="alert alert-danger" role="alert">
                        {{ errorLogin.messageKey|trans(errorLogin.messageData, 'security') }}
                    </div>
                {% endif %}
                <input type="email" value="{{ last_username }}" name="_username" id="username" class="form-control"
                       autocomplete="email" placeholder="Introduce tu e-mail" required autofocus>
                <input type="password" name="_password" id="password" class="form-control"
                       autocomplete="current-password" placeholder="Introduce tu contraseña" required>
                <a href="#">→ ¿Olvidaste tu contraseña? ←</a>
                <button type="submit">Entrar</button>
            </form>
        </div>
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                    <h1>'¡Bienvenido de nuevo!'</h1>
                    <p>Introduce tus credenciales de acceso.</p>
                    <button class="hidden" id="login">Entrar</button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h1>¡Hola, gamer!</h1>
                    <p>Rellena tus datos y regístrate.</p>
                    <button class="hidden" id="register">Registrarse</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/login.js"></script>
{% endblock %}


{% extends 'base.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="/scss/public-lists.css">
{% endblock %}
{% block body %}
    <main class="mb-5">
        <div class="container mt-5">
            <h1 class="section-title">
                <span class="title-text">Public Lists</span>
                <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" class="svg-icon"
                     viewBox="0 0 24 24" fill="currentColor" role="presentation">
                    <path d="M5.622.631A2.153 2.153 0 0 0 5 2.147c0 .568.224 1.113.622 1.515l8.249 8.34-8.25 8.34a2.16 2.16 0 0 0-.548 2.07c.196.74.768 1.317 1.499 1.515a2.104 2.104 0 0 0 2.048-.555l9.758-9.866a2.153 2.153 0 0 0 0-3.03L8.62.61C7.812-.207 6.45-.207 5.622.63z"></path>
                </svg>
            </h1>
            {% if publicLists is empty %}
                <div class="col-12 text-center text-white">
                    <img src="/img/not_found.png" alt="No results found" class="no-results-icon">
                    <p class="no-results-text">Nobody has created a public list yet! :(</p>
                </div>
            {% else %}
                <div class="accordion" id="publicListsAccordion">
                    {% for list in publicLists %}
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading{{ list.id }}">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#collapse{{ list.id }}" aria-expanded="false"
                                        aria-controls="collapse{{ list.id }}">
                                    {{ list.name }} - by {{ list.user.nick }}
                                    <img src="{{ list.user.avatar }}" alt="avatar" class="avatar">
                                </button>
                            </h2>
                            <div id="collapse{{ list.id }}" class="accordion-collapse collapse"
                                 aria-labelledby="heading{{ list.id }}" data-bs-parent="#publicListsAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        {% for game in list.games %}
                                            <div class="col-md-3 mb-3">
                                                {% set var = game.cover %}
                                                {% set urlBase = "https://images.igdb.com/igdb/image/upload/t_1080p/" %}
                                                {% set urlCompleta = urlBase ~ var ~ ".webp" %}
                                                <div class="card h-100">
                                                    <a href="{{ path('app_game_show', {'id':game.id}) }}"
                                                       target="_blank">
                                                        <img src="{{ urlCompleta }}" class="card-img-top"
                                                             alt="{{ game.name }}">
                                                    </a>
                                                    <div class="card-body d-flex flex-column">
                                                        <h5 class="card-title">{{ game.name }}</h5>
                                                        <h6 class="card-subtitle mb-2 text-muted">{{ game.dateRelease|date('F j, Y') }}</h6>
                                                        <div class="mt-auto"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <div class="pager mt-4">
                        {{ pagerfanta(publicLists) }}
                    </div>
                </div>
            {% endif %}
        </div>
    </main>
{% endblock %}
